<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japan Top 30 4象限マトリックス【2026年1月29日】</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 20px;
            color: #fff;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        // top30.jsonのjapan_top30から抽出（quadrantフィールドをそのまま使用）
        const japanStockData = [
            { rank: 1, ticker: "7011.T", name: "三菱重工業", certainty: 95, upside: 45, total: 88, monopoly: 28, resilience: 19, synergy: 22, asymmetry: 12, capital: 7, quadrant: "prime", domain: "防衛", note: "豪フリゲート受注、GPI 560億円", core_tech: "防衛装備品、原子力、航空宇宙", thesis: "防衛装備品契約首位。受注1.87兆円（3倍増）。日本初の主要水上艦輸出。" },
            { rank: 2, ticker: "8035.T", name: "東京エレクトロン", certainty: 95, upside: 40, total: 86, monopoly: 27, resilience: 17, synergy: 22, asymmetry: 12, capital: 8, quadrant: "stable_growth", domain: "AI", note: "コータ/デベロッパ世界首位90%、2/6決算", core_tech: "半導体製造装置", thesis: "コータ/デベロッパ世界首位。AI半導体需要継続。" },
            { rank: 3, ticker: "6954.T", name: "ファナック", certainty: 99, upside: 42, total: 85, monopoly: 26, resilience: 17, synergy: 20, asymmetry: 14, capital: 8, quadrant: "stable_growth", domain: "ロボティクス", note: "Q3ロボ受注+38%、中国+87%、ガイダンス+10%上方修正", core_tech: "CNC、産業用ロボット", thesis: "CNC世界首位。Q3決算で中国回復確認済み（99%確度）。" },
            { rank: 4, ticker: "6501.T", name: "日立製作所", certainty: 90, upside: 42, total: 82, monopoly: 25, resilience: 17, synergy: 21, asymmetry: 11, capital: 8, quadrant: "prime", domain: "エネルギー", note: "グリッド変圧器40%、BWRX-300", core_tech: "グリッド、HVDC、データセンター", thesis: "グリッド変圧器40%シェア。GE-Hitachi SMR。" },
            { rank: 5, ticker: "9432.T", name: "NTT", certainty: 90, upside: 30, total: 80, monopoly: 25, resilience: 18, synergy: 18, asymmetry: 10, capital: 9, quadrant: "stable_growth", domain: "AI", note: "DC 60%シェア、IOWN量子安全", core_tech: "通信インフラ、データセンター、IOWN", thesis: "国内DC60%シェア。IOWN量子安全技術統合。" },
            { rank: 6, ticker: "6506.T", name: "安川電機", certainty: 95, upside: 40, total: 79, monopoly: 24, resilience: 16, synergy: 19, asymmetry: 12, capital: 8, quadrant: "prime", domain: "ロボティクス", note: "サーボモータ世界首位、中国回復恩恵", core_tech: "サーボモータ、産業用ロボット", thesis: "サーボモータ世界首位。ファナック中国回復と連動。" },
            { rank: 7, ticker: "6701.T", name: "NEC", certainty: 95, upside: 45, total: 78, monopoly: 23, resilience: 18, synergy: 18, asymmetry: 11, capital: 8, quadrant: "prime", domain: "サイバー", note: "Protect.jp設立、cotomi 90%自動化", core_tech: "サイバーセキュリティ、防衛システム", thesis: "KDDI合弁Protect.jp設立。国内最大サイバー事業。" },
            { rank: 8, ticker: "7012.T", name: "川崎重工業", certainty: 90, upside: 42, total: 76, monopoly: 24, resilience: 17, synergy: 18, asymmetry: 10, capital: 7, quadrant: "prime", domain: "防衛", note: "防衛契約2位、GCAP共同開発", core_tech: "防衛装備品、航空宇宙、ロボット", thesis: "防衛契約2位。GCAP共同開発参画。" },
            { rank: 9, ticker: "7013.T", name: "IHI", certainty: 90, upside: 48, total: 75, monopoly: 23, resilience: 17, synergy: 18, asymmetry: 10, capital: 7, quadrant: "prime", domain: "エネルギー", note: "NuScale $40M出資、受注残1.896兆円", core_tech: "航空エンジン、ロケット、SMR", thesis: "NuScale SMRパートナー。航空+69.9% YoY確認。" },
            { rank: 10, ticker: "186A.T", name: "Astroscale HD", certainty: 85, upside: 80, total: 74, monopoly: 26, resilience: 14, synergy: 17, asymmetry: 13, capital: 4, quadrant: "speculative", domain: "宇宙", note: "軌道上サービス唯一の実績", core_tech: "軌道上サービス、デブリ除去", thesis: "軌道上サービス世界リーダー。JAXA Kプログラム支援。" },
            { rank: 11, ticker: "6920.T", name: "レーザーテック", certainty: 90, upside: 55, total: 73, monopoly: 28, resilience: 14, synergy: 18, asymmetry: 8, capital: 5, quadrant: "prime", domain: "AI", note: "EUVマスク検査100%独占", core_tech: "EUVマスク検査装置", thesis: "EUVマスク検査装置で世界100%独占。先端半導体に不可欠。" },
            { rank: 12, ticker: "6857.T", name: "アドバンテスト", certainty: 90, upside: 45, total: 72, monopoly: 24, resilience: 16, synergy: 18, asymmetry: 7, capital: 7, quadrant: "stable_growth", domain: "AI", note: "半導体テスト装置世界首位級", core_tech: "SoCテスター、メモリテスター", thesis: "SoCテスター世界首位。AI複雑化でテスト時間増加。" },
            { rank: 13, ticker: "6861.T", name: "キーエンス", certainty: 92, upside: 35, total: 71, monopoly: 24, resilience: 16, synergy: 17, asymmetry: 6, capital: 8, quadrant: "stable_growth", domain: "ロボティクス", note: "FAセンサー首位、営業利益率50%超", core_tech: "FAセンサー、計測機器", thesis: "FA用センサー世界トップ。営業利益率50%超。" },
            { rank: 14, ticker: "7735.T", name: "SCREEN HD", certainty: 88, upside: 45, total: 70, monopoly: 25, resilience: 15, synergy: 17, asymmetry: 6, capital: 7, quadrant: "stable_growth", domain: "AI", note: "半導体洗浄装置世界首位60%", core_tech: "ウェーハ洗浄装置", thesis: "ウェーハ洗浄装置世界首位。先端プロセス需要。" },
            { rank: 15, ticker: "6273.T", name: "SMC", certainty: 90, upside: 38, total: 69, monopoly: 26, resilience: 15, synergy: 15, asymmetry: 6, capital: 7, quadrant: "stable_growth", domain: "ロボティクス", note: "空圧機器40%世界首位", core_tech: "空圧機器、FA部品", thesis: "空圧機器世界40%シェアで圧倒的首位。" },
            { rank: 16, ticker: "6503.T", name: "三菱電機", certainty: 88, upside: 40, total: 68, monopoly: 22, resilience: 17, synergy: 17, asymmetry: 6, capital: 6, quadrant: "stable_growth", domain: "防衛", note: "防衛エレクトロニクス、レーダー", core_tech: "防衛エレクトロニクス、FA", thesis: "防衛エレクトロニクス（レーダー、誘導装置）で強み。" },
            { rank: 17, ticker: "6702.T", name: "富士通", certainty: 85, upside: 42, total: 67, monopoly: 21, resilience: 17, synergy: 17, asymmetry: 6, capital: 6, quadrant: "prime", domain: "サイバー", note: "量子コンピュータ、政府向けIT", core_tech: "量子コンピュータ、サイバーセキュリティ", thesis: "国産量子コンピュータ開発。政府向けサイバー。" },
            { rank: 18, ticker: "9433.T", name: "KDDI", certainty: 90, upside: 32, total: 66, monopoly: 22, resilience: 17, synergy: 16, asymmetry: 5, capital: 6, quadrant: "stable_growth", domain: "サイバー", note: "NEC合弁Protect.jp、5G・AI需要", core_tech: "通信インフラ、サイバーセキュリティ", thesis: "NEC合弁Protect.jp設立。国内最大サイバー事業。" },
            { rank: 19, ticker: "6758.T", name: "ソニーグループ", certainty: 88, upside: 35, total: 65, monopoly: 24, resilience: 15, synergy: 16, asymmetry: 4, capital: 6, quadrant: "stable_growth", domain: "AI", note: "イメージセンサー50%世界首位", core_tech: "CMOSイメージセンサー、宇宙光通信", thesis: "CMOSイメージセンサー50%シェア。車載・産業用成長。" },
            { rank: 20, ticker: "5631.T", name: "日本製鋼所", certainty: 85, upside: 50, total: 64, monopoly: 26, resilience: 16, synergy: 14, asymmetry: 4, capital: 4, quadrant: "prime", domain: "エネルギー", note: "原子力圧力容器世界80%シェア", core_tech: "原子力圧力容器、防衛", thesis: "原子力圧力容器で世界シェア80%。SMR需要。" },
            { rank: 21, ticker: "6141.T", name: "DMG森精機", certainty: 85, upside: 42, total: 63, monopoly: 22, resilience: 15, synergy: 16, asymmetry: 5, capital: 5, quadrant: "prime", domain: "ロボティクス", note: "5軸加工機で世界トップクラス", core_tech: "工作機械、5軸加工", thesis: "5軸加工機で世界トップ。航空宇宙・防衛向け。" },
            { rank: 22, ticker: "6645.T", name: "オムロン", certainty: 85, upside: 40, total: 62, monopoly: 21, resilience: 15, synergy: 16, asymmetry: 5, capital: 5, quadrant: "prime", domain: "ロボティクス", note: "FA制御機器、協働ロボット", core_tech: "FA制御機器、ロボティクス", thesis: "FA制御機器で世界トップクラス。" },
            { rank: 23, ticker: "6723.T", name: "ルネサス", certainty: 85, upside: 45, total: 61, monopoly: 22, resilience: 14, synergy: 16, asymmetry: 4, capital: 5, quadrant: "prime", domain: "AI", note: "車載マイコン世界首位級", core_tech: "車載半導体、マイコン", thesis: "車載マイコン世界首位級。EV・ADAS需要。" },
            { rank: 24, ticker: "6807.T", name: "日本航空電子", certainty: 85, upside: 45, total: 60, monopoly: 22, resilience: 16, synergy: 14, asymmetry: 4, capital: 4, quadrant: "prime", domain: "防衛", note: "F-35向け部品供給", core_tech: "コネクタ、防衛電子機器", thesis: "航空・防衛向け高信頼性コネクタ。F-35供給。" },
            { rank: 25, ticker: "6361.T", name: "荏原製作所", certainty: 85, upside: 42, total: 59, monopoly: 22, resilience: 15, synergy: 14, asymmetry: 4, capital: 4, quadrant: "prime", domain: "エネルギー", note: "原子力ポンプ国内独占", core_tech: "ポンプ、原子力機器", thesis: "原子力プラント向けポンプで国内独占。" },
            { rank: 26, ticker: "9501.T", name: "東京電力HD", certainty: 70, upside: 65, total: 58, monopoly: 24, resilience: 12, synergy: 12, asymmetry: 6, capital: 4, quadrant: "speculative", domain: "エネルギー", note: "柏崎刈羽30年設定ミス発覚、再稼働不透明", core_tech: "原子力発電、送配電", thesis: "柏崎刈羽7基保有。1/22制御棒設定ミス発覚で不確実性増。" },
            { rank: 27, ticker: "7224.T", name: "新明和工業", certainty: 82, upside: 48, total: 57, monopoly: 24, resilience: 16, synergy: 11, asymmetry: 4, capital: 2, quadrant: "prime", domain: "防衛", note: "US-2救難飛行艇で世界唯一", core_tech: "飛行艇、特装車両", thesis: "US-2救難飛行艇で世界唯一。輸出解禁で成長余地。" },
            { rank: 28, ticker: "7739.T", name: "キヤノン電子", certainty: 78, upside: 55, total: 56, monopoly: 20, resilience: 14, synergy: 14, asymmetry: 5, capital: 3, quadrant: "speculative", domain: "宇宙", note: "小型衛星、スペースワン出資", core_tech: "小型衛星、光学部品", thesis: "小型衛星開発。スペースワン（ロケット）出資。" },
            { rank: 29, ticker: "1963.T", name: "日揮HD", certainty: 82, upside: 45, total: 55, monopoly: 21, resilience: 14, synergy: 13, asymmetry: 4, capital: 3, quadrant: "prime", domain: "エネルギー", note: "LNGプラント世界トップ3", core_tech: "LNGプラント、水素", thesis: "LNGプラントEPCで世界トップ3。水素関連成長。" },
            { rank: 30, ticker: "6779.T", name: "日本電波工業", certainty: 80, upside: 48, total: 54, monopoly: 22, resilience: 13, synergy: 12, asymmetry: 4, capital: 3, quadrant: "prime", domain: "宇宙", note: "高精度水晶デバイス世界トップ", core_tech: "水晶デバイス、宇宙用部品", thesis: "高精度水晶デバイス世界トップ。宇宙・防衛向け。" },
        ];

        const domainColors = {
            "AI": "#a855f7",
            "防衛": "#3b82f6",
            "エネルギー": "#22c55e",
            "ロボティクス": "#f97316",
            "宇宙": "#06b6d4",
            "サイバー": "#ec4899",
        };

        const quadrantColors = {
            prime: { bg: "rgba(34, 197, 94, 0.15)", border: "#22c55e", label: "最優先投資" },
            stable_growth: { bg: "rgba(59, 130, 246, 0.15)", border: "#3b82f6", label: "安定成長" },
            speculative: { bg: "rgba(249, 115, 22, 0.15)", border: "#f97316", label: "投機的機会" },
            avoid: { bg: "rgba(239, 68, 68, 0.15)", border: "#ef4444", label: "回避/様子見" },
        };

        function QuadrantChart() {
            const [hoveredStock, setHoveredStock] = useState(null);
            const [selectedDomain, setSelectedDomain] = useState("all");

            const chartWidth = 900;
            const chartHeight = 650;
            const padding = 70;

            const filteredStocks = selectedDomain === "all"
                ? japanStockData
                : japanStockData.filter(s => s.domain === selectedDomain);

            // 軸のスケール: certainty 70-100%, upside 25-85%
            const scaleX = (certainty) => padding + ((certainty - 70) / 30) * (chartWidth - 2 * padding);
            const scaleY = (upside) => chartHeight - padding - ((upside - 25) / 60) * (chartHeight - 2 * padding);

            // 象限境界: certainty=88%, upside=43% で分割
            // これにより prime(14社)が右上に、stable_growth(12社)が右下に配置される
            const boundaryX = scaleX(88);
            const boundaryY = scaleY(43);

            const domains = [...new Set(japanStockData.map(s => s.domain))];

            const sortedStocks = [...filteredStocks].sort((a, b) => {
                if (a.ticker === hoveredStock) return 1;
                if (b.ticker === hoveredStock) return -1;
                return 0;
            });

            const hoveredStockData = hoveredStock ? japanStockData.find(s => s.ticker === hoveredStock) : null;

            // 実際のデータのquadrantフィールドから集計
            const quadrantCounts = {
                prime: japanStockData.filter(s => s.quadrant === "prime").length,
                stable_growth: japanStockData.filter(s => s.quadrant === "stable_growth").length,
                speculative: japanStockData.filter(s => s.quadrant === "speculative").length,
            };

            return (
                <div style={{ maxWidth: "1200px", margin: "0 auto" }}>
                    <h1 style={{ textAlign: "center", fontSize: "24px", marginBottom: "8px", color: "#fff" }}>
                        Japan Top 30 4象限マトリックス
                    </h1>
                    <h2 style={{ textAlign: "center", fontSize: "16px", marginBottom: "12px", color: "#94a3b8", fontWeight: "normal" }}>
                        確実性 x アップサイド | 2026年1月29日
                    </h2>

                    <div style={{ display: "flex", justifyContent: "center", marginBottom: "16px" }}>
                        <div style={{
                            background: "linear-gradient(135deg, #f97316, #ea580c)",
                            padding: "8px 20px",
                            borderRadius: "20px",
                            fontSize: "13px",
                            fontWeight: "bold",
                            boxShadow: "0 4px 15px rgba(249, 115, 22, 0.4)"
                        }}>
                            市場リスク 58/100（中程度）| 日経53,115円 | バランス型スタンス
                        </div>
                    </div>

                    <div style={{ display: "flex", justifyContent: "center", gap: "8px", marginBottom: "16px", flexWrap: "wrap" }}>
                        <button
                            onClick={() => setSelectedDomain("all")}
                            style={{
                                padding: "6px 14px",
                                borderRadius: "20px",
                                border: "none",
                                background: selectedDomain === "all" ? "#fff" : "#334155",
                                color: selectedDomain === "all" ? "#1a1a2e" : "#94a3b8",
                                cursor: "pointer",
                                fontSize: "12px",
                                fontWeight: selectedDomain === "all" ? "bold" : "normal"
                            }}
                        >
                            すべて ({japanStockData.length})
                        </button>
                        {domains.map(domain => (
                            <button
                                key={domain}
                                onClick={() => setSelectedDomain(domain)}
                                style={{
                                    padding: "6px 14px",
                                    borderRadius: "20px",
                                    border: `1px solid ${domainColors[domain] || "#888"}`,
                                    background: selectedDomain === domain ? (domainColors[domain] || "#888") : "transparent",
                                    color: selectedDomain === domain ? "#fff" : (domainColors[domain] || "#888"),
                                    cursor: "pointer",
                                    fontSize: "12px"
                                }}
                            >
                                {domain} ({japanStockData.filter(s => s.domain === domain).length})
                            </button>
                        ))}
                    </div>

                    <div style={{ position: "relative", background: "#0f172a", borderRadius: "12px", padding: "10px" }}>
                        <svg width={chartWidth} height={chartHeight} style={{ display: "block", margin: "0 auto" }}>
                            {/* 4象限の背景 */}
                            <rect x={padding} y={padding} width={boundaryX - padding} height={boundaryY - padding} fill={quadrantColors.speculative.bg} />
                            <rect x={boundaryX} y={padding} width={chartWidth - padding - boundaryX} height={boundaryY - padding} fill={quadrantColors.prime.bg} />
                            <rect x={padding} y={boundaryY} width={boundaryX - padding} height={chartHeight - padding - boundaryY} fill={quadrantColors.avoid.bg} />
                            <rect x={boundaryX} y={boundaryY} width={chartWidth - padding - boundaryX} height={chartHeight - padding - boundaryY} fill={quadrantColors.stable_growth.bg} />

                            {/* 象限ラベル */}
                            <text x={padding + 10} y={padding + 25} fill={quadrantColors.speculative.border} fontSize="13" fontWeight="bold">投機的機会 ({quadrantCounts.speculative})</text>
                            <text x={chartWidth - padding - 140} y={padding + 25} fill={quadrantColors.prime.border} fontSize="13" fontWeight="bold">最優先投資 ({quadrantCounts.prime})</text>
                            <text x={padding + 10} y={chartHeight - padding - 10} fill={quadrantColors.avoid.border} fontSize="13" fontWeight="bold">回避/様子見</text>
                            <text x={chartWidth - padding - 130} y={chartHeight - padding - 10} fill={quadrantColors.stable_growth.border} fontSize="13" fontWeight="bold">安定成長 ({quadrantCounts.stable_growth})</text>

                            {/* 境界線 */}
                            <line x1={boundaryX} y1={padding} x2={boundaryX} y2={chartHeight - padding} stroke="#475569" strokeDasharray="4" />
                            <line x1={padding} y1={boundaryY} x2={chartWidth - padding} y2={boundaryY} stroke="#475569" strokeDasharray="4" />

                            {/* 外枠 */}
                            <rect x={padding} y={padding} width={chartWidth - 2 * padding} height={chartHeight - 2 * padding} fill="none" stroke="#475569" strokeWidth="1" />

                            {/* 軸ラベル */}
                            <text x={chartWidth / 2} y={chartHeight - 20} textAnchor="middle" fill="#94a3b8" fontSize="12">確実性 (%) →</text>
                            <text x={20} y={chartHeight / 2} textAnchor="middle" fill="#94a3b8" fontSize="12" transform={`rotate(-90, 20, ${chartHeight / 2})`}>アップサイド (%) →</text>

                            {/* X軸目盛り */}
                            {[70, 75, 80, 85, 88, 90, 95, 100].map(v => (
                                <g key={`x-${v}`}>
                                    <line x1={scaleX(v)} y1={chartHeight - padding} x2={scaleX(v)} y2={chartHeight - padding + 5} stroke="#64748b" />
                                    <text x={scaleX(v)} y={chartHeight - padding + 18} textAnchor="middle" fill={v === 88 ? "#22c55e" : "#64748b"} fontSize="10" fontWeight={v === 88 ? "bold" : "normal"}>{v}</text>
                                </g>
                            ))}
                            {/* Y軸目盛り */}
                            {[25, 35, 43, 50, 60, 70, 80].map(v => (
                                <g key={`y-${v}`}>
                                    <line x1={padding - 5} y1={scaleY(v)} x2={padding} y2={scaleY(v)} stroke="#64748b" />
                                    <text x={padding - 10} y={scaleY(v) + 4} textAnchor="end" fill={v === 43 ? "#22c55e" : "#64748b"} fontSize="10" fontWeight={v === 43 ? "bold" : "normal"}>{v}</text>
                                </g>
                            ))}

                            {/* 銘柄プロット */}
                            {sortedStocks.map((stock) => {
                                const x = scaleX(stock.certainty);
                                const y = scaleY(stock.upside);
                                const color = domainColors[stock.domain] || "#888";
                                const isHovered = hoveredStock === stock.ticker;
                                const isTop1 = stock.rank === 1;
                                const isPrime = stock.quadrant === "prime";
                                const isHighCertainty = stock.certainty >= 99;
                                const isHighMonopoly = stock.monopoly >= 26;

                                return (
                                    <g key={stock.ticker} style={{ cursor: "pointer" }}>
                                        <circle
                                            cx={x}
                                            cy={y}
                                            r={isTop1 ? 28 : isPrime ? 22 : isHovered ? 24 : 18}
                                            fill={isTop1 ? `#ffd700cc` : isHighCertainty ? `#00ff88cc` : isPrime ? `${color}cc` : `${color}88`}
                                            stroke={isTop1 ? "#ffd700" : isHighCertainty ? "#00ff88" : isPrime ? "#22c55e" : isHovered ? "#fff" : color}
                                            strokeWidth={isTop1 ? 3 : isPrime ? 2 : isHovered ? 3 : 1}
                                            style={{ transition: "all 0.2s" }}
                                            onMouseEnter={() => setHoveredStock(stock.ticker)}
                                            onMouseLeave={() => setHoveredStock(null)}
                                        />
                                        <text x={x} y={y + 1} textAnchor="middle" dominantBaseline="middle" fill={isTop1 ? "#1a1a2e" : "#fff"} fontSize={isTop1 ? "9" : isHovered ? "9" : "8"} fontWeight="bold" style={{ pointerEvents: "none" }}>
                                            {stock.ticker.replace('.T', '')}
                                        </text>
                                        <text x={x} y={y - (isTop1 ? 36 : isPrime ? 30 : 26)} textAnchor="middle" fill={isTop1 ? "#ffd700" : isHighCertainty ? "#00ff88" : isPrime ? "#22c55e" : "#94a3b8"} fontSize={isTop1 ? "11" : "9"} fontWeight={isTop1 || isPrime ? "bold" : "normal"} style={{ pointerEvents: "none" }}>
                                            {isTop1 ? "#1" : `#${stock.rank}`}
                                        </text>
                                    </g>
                                );
                            })}
                        </svg>

                        {/* ホバー時の詳細表示 */}
                        {hoveredStockData && (
                            <div style={{
                                position: "absolute",
                                top: "20px",
                                right: "20px",
                                background: "#1e293b",
                                border: "1px solid #475569",
                                borderRadius: "8px",
                                padding: "12px",
                                minWidth: "320px",
                                boxShadow: "0 10px 40px rgba(0,0,0,0.5)",
                                zIndex: 100
                            }}>
                                {(() => {
                                    const stock = hoveredStockData;
                                    const color = domainColors[stock.domain] || "#888";
                                    const isPrime = stock.quadrant === "prime";
                                    const isHighCertainty = stock.certainty >= 99;
                                    return (
                                        <>
                                            <div style={{ display: "flex", alignItems: "center", gap: "8px" }}>
                                                <span style={{ fontSize: "18px", fontWeight: "bold", color: stock.rank === 1 ? "#ffd700" : color }}>
                                                    {stock.ticker}
                                                </span>
                                                {stock.rank === 1 && <span style={{ background: "#ffd700", color: "#000", padding: "2px 6px", borderRadius: "4px", fontSize: "10px" }}>最高評価</span>}
                                                {isPrime && <span style={{ background: "#22c55e", color: "#000", padding: "2px 6px", borderRadius: "4px", fontSize: "10px" }}>Prime</span>}
                                                {isHighCertainty && <span style={{ background: "#00ff88", color: "#000", padding: "2px 6px", borderRadius: "4px", fontSize: "10px" }}>確度99%</span>}
                                            </div>
                                            <div style={{ fontSize: "14px", color: "#94a3b8", marginBottom: "4px" }}>{stock.name}</div>
                                            <div style={{ fontSize: "11px", color: "#64748b", marginBottom: "8px" }}>{stock.core_tech}</div>

                                            <div style={{ fontSize: "12px", color: "#cbd5e1" }}>
                                                <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: "4px" }}>
                                                    <div>順位: #{stock.rank}</div>
                                                    <div>総合: {stock.total}点</div>
                                                    <div>確実性: {stock.certainty}%</div>
                                                    <div>アップサイド: {stock.upside}%</div>
                                                </div>

                                                <div style={{ marginTop: "6px", paddingTop: "6px", borderTop: "1px solid #475569", fontSize: "11px" }}>
                                                    <div>独占力: {stock.monopoly}/30 | 政策耐性: {stock.resilience}/20</div>
                                                    <div>シナジー: {stock.synergy}/25 | 非対称性: {stock.asymmetry}/15</div>
                                                    <div>資本効率: {stock.capital}/10</div>
                                                </div>

                                                <div style={{ marginTop: "6px", color: "#fbbf24" }}>{stock.note}</div>
                                                <div style={{ marginTop: "4px", color: "#94a3b8", fontSize: "10px" }}>{stock.thesis}</div>
                                            </div>
                                        </>
                                    );
                                })()}
                            </div>
                        )}
                    </div>

                    {/* 凡例 */}
                    <div style={{ display: "flex", justifyContent: "center", gap: "16px", marginTop: "16px", flexWrap: "wrap" }}>
                        {Object.entries(domainColors).map(([domain, color]) => (
                            <div key={domain} style={{ display: "flex", alignItems: "center", gap: "6px" }}>
                                <div style={{ width: "12px", height: "12px", borderRadius: "50%", background: color }} />
                                <span style={{ fontSize: "12px", color: "#94a3b8" }}>{domain}</span>
                            </div>
                        ))}
                        <div style={{ display: "flex", alignItems: "center", gap: "6px" }}>
                            <div style={{ width: "12px", height: "12px", borderRadius: "50%", border: "2px solid #22c55e", background: "transparent" }} />
                            <span style={{ fontSize: "12px", color: "#22c55e" }}>Prime銘柄</span>
                        </div>
                        <div style={{ display: "flex", alignItems: "center", gap: "6px" }}>
                            <div style={{ width: "12px", height: "12px", borderRadius: "50%", border: "2px solid #00ff88", background: "transparent" }} />
                            <span style={{ fontSize: "12px", color: "#00ff88" }}>確度99%</span>
                        </div>
                    </div>

                    {/* サマリーボックス */}
                    <div style={{
                        marginTop: "16px",
                        background: "linear-gradient(135deg, rgba(255,215,0,0.15), rgba(34,197,94,0.1))",
                        border: "2px solid #ffd700",
                        borderRadius: "10px",
                        padding: "14px"
                    }}>
                        <div style={{ display: "flex", alignItems: "center", gap: "8px", marginBottom: "6px" }}>
                            <span style={{ fontSize: "16px", fontWeight: "bold", color: "#ffd700" }}>
                                Top 5: 三菱重工(88) | TEL(86) | ファナック(85/99%確度) | 日立(82) | NTT(80)
                            </span>
                        </div>
                        <div style={{ fontSize: "12px", color: "#cbd5e1", lineHeight: "1.6" }}>
                            本日の重要更新: ファナックQ3決算(+38%、中国+87%、ガイダンス+10%上方修正)、三菱重工豪フリゲート・GPI契約、NEC Protect.jp設立、柏崎刈羽30年設定ミス発覚
                        </div>
                        <div style={{ fontSize: "11px", color: "#94a3b8", marginTop: "6px" }}>
                            象限分布: Prime {quadrantCounts.prime}社 | 安定成長 {quadrantCounts.stable_growth}社 | 投機的 {quadrantCounts.speculative}社
                        </div>
                    </div>

                    <div style={{ textAlign: "center", marginTop: "20px", fontSize: "11px", color: "#64748b" }}>
                        2026年1月29日 | Japan Top 30 マルチドメイン・コンバージェンス分析 v3.1
                    </div>
                </div>
            );
        }

        ReactDOM.render(<QuadrantChart />, document.getElementById('root'));
    </script>
</body>
</html>
